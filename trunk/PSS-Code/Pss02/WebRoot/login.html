<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>登陆</title>
<script src="/Pss/js/dojo/dojo.js" djConfig="parseOnLoad: true"></script>
<script type="text/javascript" src="/Pss/js/common.js"></script>
<script type="text/javascript">
    dojo.require("custom.TextInput");
    dojo.require("dijit.form.Button");
       function registVC(){
           dojo.attr(dojo.byId("validationImg"),"src","/Pss/Login/validationCode.action?d="+new Date().toString());
       }
    dojo.addOnLoad(function() {
       //初始化验证码
       registVC();
       //注册刷新验证码的机制
       dojo.connect(dojo.byId("refrash"),"onclick",null,registVC);
    });
</script>
<link rel="stylesheet" type="text/css"
	href="/Pss/js/dijit/themes/claro/claro.css" />
<link rel="stylesheet" href="/Pss/css/text.css" />
<link rel="stylesheet" type="text/css" href="/Pss/css/common/common.css" />
</head>
<body class="claro">
	<div class="page">
		<div>
			<div style="height: 50px;">LOGO</div>
			<div class="header-line">PSS</div>
		</div>

		<div style="width: 300px; margin: 120px auto;">
			<span>登陆</span>
			<div id="loginErrors"></div>
			<form id="login" action="/Pss/Login/login" method="post">
				<table style="border: 1px solid #9f9f9f; margin: 5px;"
					cellspacing="10">
					<tr>
						<td width="50"><label for="name">公&nbsp;&nbsp;&nbsp;司</label>
						</td>
						<td width="150"><input id="tenant" name="tenantName"
							required="true" dojoType="custom.TextInput"
							regExp="^[a-zA-Z][a-zA-Z0-9_]{5,15}$"
							invalidMessage="租户名称只能包含6-16位字母或数字" style="width: 150px;" />
						</td>
						<td width="150"></td>
					</tr>
					<tr>
						<td width="50"><label for="name">账&nbsp;&nbsp;&nbsp;号</label>
						</td>
						<td width="150"><input id="name" name="user.userName"
							required="true" dojoType="custom.TextInput"
							regExp="^[a-zA-Z][a-zA-Z0-9_]{5,15}$"
							invalidMessage="用户名称只能包含6-16位字母或数字" style="width: 150px;" />
						</td>
						<td width="150"></td>
					</tr>
					<tr>
						<td><label for="password">密&nbsp;&nbsp;&nbsp;码</label>
						</td>
						<td><input type="password" id="password"
							name="user.userPassword" required="true"
							dojoType="custom.TextInput" regExp="^[0-9|a-z|A-Z]{8,16}$"
							invalidMessage="用户密码必须是8至16位字母或数字" style="width: 150px;" />
						</td>
						<td></td>
					</tr>
					<tr>
						<td>验证码</td>
						<td><input type="text" id="validationCode"
							name="validationCode" required="true" dojoType="custom.TextInput"
							style="width: 80px;" /> <img id="validationImg" src="" alt=""
							width="60" height="25" style="vertical-align: middle;" /></td>
						<td><a id="refrash" href="#" style="line-height: 18px;">看不清</a>
						</td>
					</tr>
				</table>
			</form>
			<div style="text-align: right;">
				<button dojoType="dijit.form.Button"
					onClick="Common.submitFormAsync('login',loginResponse)">登陆</button>
				<button dojoType="dijit.form.Button"
					onClick="Common.goTo('/Pss/regist.html')">注册</button>
			</div>
		</div>
		<div class="footer">
			<hr></hr>
			<span>Copyright ©</span>
		</div>
	</div>
	<script type="text/javascript">
	function loginResponse(data){
	if(data!=null && data.correct){
		Common.goTo('/Pss/');
	}
    }
</script>
</body>
</html>