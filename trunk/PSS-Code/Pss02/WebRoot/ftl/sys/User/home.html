<div dojoType="dijit.Toolbar">
<button dojoType="dijit.form.Button"
	onClick="Common.showDialog('新建用户','/Pss/sys/User_add')">新建</button>
<span dojoType="dijit.ToolbarSeparator"></span>
<button dojoType="dijit.form.Button"
	onClick="Common.update('修改用户','/Pss/sys/User_update')">修改</button>
<span dojoType="dijit.ToolbarSeparator"></span>
<button dojoType="dijit.form.Button"
	onClick="Common.remove('${request.getContextPath()}/sys/User/deleteEntity')">删除</button>
<form id="searchForm"
	action="${request.getContextPath()}/sys/User/queryEntity">用户名： <input
	id="entity.userName" name="entity.userName" /> 角色 <select
	name="entity.role.roleId">
	<option value="">全部</option>
	<option value="0">店长</option>
	<option value="1">采购员</option>
	<option value="2">仓库管理员</option>
	<option value="3">销售员</option>
</select>
<button id="searchBtn" dojoType="dijit.form.Button"
	onClick="Common.search()">查询</button>
</form>
</div>
<#include "../../common/pager.html"/>
<table id="jsonGrid" dojoType="dojox.grid.DataGrid">
	<thead>
		<tr>
			<th field="userName" width="auto">账号</th>
			<th field="role" formatter="roleValue" width="auto">角色</th>
			<th field="lastLoginTime" width="auto">最后登录时间</th>
		</tr>
	</thead>
</table>
<script type="text/javascript">
	function init() {
		Common.refreshDataGrid("jsonGrid",
				"${request.getContextPath()}/sys/User/queryEntity");
	}
	function roleValue(value, rowIndex) {
		if (value.roleId == 0) {
			return "店主";
		} else if (value.roleId == 1) {
			return "采购员";
		} else if (value.roleId == 2) {
			return "库存管理员";
		} else if (value.roleId == 3) {
			return "销售";
		}
	}
</script>